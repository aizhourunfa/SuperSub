# 移动端适配技术方案

## 1. 现有 UI/UX 分析与问题识别

通过对项目核心代码的审查，我们识别出当前 UI/UX 在移动端上可能存在的几个主要问题。项目基于 Vue 3、Naive UI 和 Tailwind CSS 构建，整体为典型的桌面后台管理布局。

### 1.1. 整体布局 (`Layout.vue`)

*   **问题**: 采用经典的“顶部-侧边栏”布局，侧边栏 (`NLayoutSider`) 固定宽度为 240px。在小屏幕设备上，这将挤占过多空间，导致主内容区域无法正常显示。
*   **截图模拟**:
    *   桌面端：[Header] [ Sider | Main Content ]
    *   移动端（未经适配）：[Header] [ Sider | ... ] (主内容被挤出屏幕)

### 1.2. 首页仪表盘 (`HomeView.vue`)

*   **问题**: 使用了 `n-grid` 组件，设置为 `cols="2 s:3 m:4"`。这意味着在超小屏幕上（手机竖屏），它会尝试显示两列，导致卡片 (`n-card`) 内容被严重压缩，可读性差。
*   **截图模拟**:
    *   移动端（未经适配）：
        ```
        [Card1][Card2]
        [Card3][Card4]
        ...
        ```
        (每个卡片宽度只有屏幕的一半，内部文字可能换行混乱)

### 1.3. 订阅管理页面 (`SubscriptionsView.vue`)

*   **问题**:
    1.  **数据表格 (`NDataTable`)**: 表格包含 8 个列，并设置了 `scroll-x="1800"`，这在桌面端是合理的，但在移动端意味着用户必须进行大量的横向滚动才能查看所有数据，体验极差。
    2.  **操作按钮栏**: 页面顶部的 `n-space` 包含大量操作按钮（新增、导入、更新、删除等），在小屏幕上会强制换行或溢出，显得非常杂乱。
    3.  **Tab 导航**: 订阅分组以 `n-tabs` 的形式展示，当分组过多时，在移动端会超出屏幕宽度，且不易点击。

### 1.4. 设置页面 (`SettingsView.vue` & 子组件)

*   **问题**: 设置页面通常包含大量表单项 (`NForm`, `NFormItem`)。虽然 Naive UI 的表单有一定自适应能力，但复杂的布局（如多列表单）在移动端可能会变得拥挤，标签和输入框的对齐方式也需要优化。

### 1.5. 弹出框/模态框 (Modals)

*   **问题**: 项目中大量使用了模态框（例如，新增/编辑订阅、规则管理等），这些模态框通常具有固定的或较大的宽度（如 `900px`）。在移动设备上，这些模态框会超出屏幕宽度，导致无法完整查看或操作。


## 2. 响应式策略定义

为了系统地解决上述问题，我们采用“移动端优先”的思路，并定义一套清晰的响应式策略。

### 2.1. 响应式断点

我们将基于 `Tailwind CSS` 的默认断点体系，并可根据需要进行微调。核心断点如下：

*   **Mobile (手机)**: `< 768px`
*   **Tablet (平板)**: `768px` - `1024px`
*   **Desktop (桌面)**: `> 1024px`

我们将主要关注 **Mobile** 尺寸的适配，兼顾 **Tablet**。

### 2.2. 核心技术与方法

1.  **媒体查询 (Media Queries)**:
    *   我们将利用 Tailwind CSS 的响应式变体（如 `md:`, `lg:`）来为不同断点编写特定的样式。
    *   对于复杂的逻辑，会使用 Naive UI 提供的 `use-media-query` composable 或自定义的 Vue composable 来动态调整组件行为。

2.  **Flexbox & Grid**:
    *   充分利用 Flexbox 的 `flex-wrap` 属性处理按钮和表单项的换行。
    *   对于网格布局（如首页仪表盘），在移动端将 `grid-cols` 调整为 `1`，确保内容垂直排列。

3.  **组件的动态渲染**:
    *   使用 `v-if` 或动态组件 `<component :is="...">`，根据屏幕尺寸加载不同的组件或布局。例如，在移动端使用一个简化的表格组件，而在桌面端使用功能完整的 `NDataTable`。

4.  **Naive UI 响应式配置**:
    *   许多 Naive UI 组件（如 `NLayoutSider`, `NGrid`）自身提供了响应式相关的属性（如 `collapsed`, `responsive`），我们将充分利用这些内置能力。


## 3. 关键组件改造规划

基于以上分析和策略，我们为核心组件制定如下改造方案。

### 3.1. `Layout.vue` - 响应式导航

*   **目标**: 在移动端，将侧边栏菜单转换为更适合小屏幕的交互方式，如抽屉式菜单或底部导航。
*   **建议方案 (抽屉式菜单)**:
    1.  **侦听屏幕尺寸**: 使用 `use-media-query` 实时侦听屏幕是否小于 `768px`。
    2.  **隐藏侧边栏**: 当屏幕小于 `768px` 时，隐藏 `NLayoutSider`。
    3.  **添加汉堡按钮**: 在 `NLayoutHeader` 的左侧添加一个汉堡菜单按钮 (icon)。
    4.  **实现抽屉**: 使用 Naive UI 的 `NDrawer` 组件。点击汉堡按钮时，从左侧滑出抽屉，抽屉内包含原有的 `NMenu` 导航菜单。
    5.  **交互**: 点击抽屉内的菜单项后，应关闭抽屉并跳转页面。
*   **Mermaid 流程图**:
    ```mermaid
    graph TD
        A[用户在移动端打开页面] --> B{屏幕宽度 < 768px?}
        B -- 是 --> C[隐藏侧边栏Sider]
        C --> D[在Header中显示汉堡按钮]
        D -- 用户点击 --> E[打开Drawer]
        E -- 用户点击菜单项 --> F[关闭Drawer并跳转]
        B -- 否 --> G[显示常规桌面布局]
    ```

### 3.2. `HomeView.vue` - 仪表盘网格

*   **目标**: 确保仪表盘卡片在移动端垂直堆叠，保证信息清晰展示。
*   **建议方案**:
    1.  修改 `NGrid` 的 `cols` 属性。当前为 `cols="2 s:3 m:4"`。
    2.  **调整为**: `cols="1 s:2 m:4"`。
        *   `1`: 在默认（最小）屏幕尺寸下，每行显示 1 个卡片。
        *   `s:2`: 在 `small` 断点及以上，每行显示 2 个。
        *   `m:4`: 在 `medium` 断点及以上，每行显示 4 个。
    *   这样可以确保在手机竖屏状态下，卡片会单列全宽显示，提供最佳可读性。

### 3.3. `SubscriptionsView.vue` - 复杂数据表格与操作

*   **目标**: 将复杂的表格和密集的操作按钮适配到小屏幕上。
*   **建议方案**:
    1.  **数据展示 (方案A: 卡片列表)**:
        *   在移动端，放弃 `NDataTable`，改为使用 `NList` 和 `NListItem` 渲染成卡片列表。
        *   每个卡片展示最核心的信息，如 **名称**、**状态**、**剩余流量/天数**。
        *   在每个卡片底部或右上角放置一个“更多”按钮 (`MoreIcon`)，点击后通过 `NDropdown` 或 `NModal` 展示次要信息和操作按钮（编辑、更新、删除等）。
    2.  **数据展示 (方案B: 简化表格)**:
        *   在移动端，动态减少 `NDataTable` 的 `columns` 数量，只显示 2-3 个最关键的列（如“名称”和“状态”）。
        *   在最后一列添加一个操作按钮，点击后展开详情或弹出模态框。
    3.  **操作按钮栏**:
        *   将顶部的多个操作按钮收起到一个“操作”或“+” `NDropdown` 菜单中。只保留 1-2 个最高频的操作（如“新增订阅”）作为独立按钮。
    4.  **Tab 导航**:
        *   当 `NTabs` 内容溢出时，Naive UI 会自动提供滚动功能。我们可以接受这个默认行为，或者在移动端将 Tabs 转换为 `NSelect` 下拉选择器，以节省空间。

*   **Mermaid 流程图 (数据展示方案A)**:
    ```mermaid
    graph TD
        subgraph 移动端 (< 768px)
            A[页面加载] --> B{渲染订阅列表}
            B --> C[使用 NList 和 NListItem]
            C --> D[每个Item是一个卡片]
            D --> E{卡片内显示核心数据}
            E --> F[名称, 状态, 流量]
            D --> G[卡片右上角显示'更多'按钮]
            G -- 用户点击 --> H[弹出Dropdown菜单]
            H --> I[显示'编辑', '删除'等操作]
        end
        subgraph 桌面端 (>= 768px)
            J[页面加载] --> K[使用 NDataTable]
            K --> L[显示所有数据列]
        end
    ```

### 3.4. 模态框 (Modals)

*   **目标**: 确保所有模态框在移动端能够正常显示和使用。
*   **建议方案**:
    1.  **宽度自适应**: 对于所有 `NModal` 或 `preset="card"` 的模态框，将其 `style` 属性中的固定宽度（如 `width: 900px`）修改为响应式宽度。
    2.  **示例**: 使用 CSS `max-width` 和 `width`。例如：`style="max-width: 900px; width: 90vw;"`。这样可以确保模态框在桌面端最大为 `900px`，而在小屏幕上宽度为视口的 `90%`，不会溢出。
    3.  **内容滚动**: 对于内容过多的模态框（如规则管理），确保其内容区域是可滚动的，可以使用 `overflow-y: auto`。


## 4. 实施步骤与建议

为了高效、有序地推进移动端适配工作，建议按以下步骤实施：

1.  **环境准备**:
    *   在 `tailwind.config.js` 中确认或添加响应式断点。
    *   创建一个 `composables/useMediaQuery.ts` 文件，封装一个全局可用的 `useMediaQuery` hook，方便在 Vue 组件中进行响应式判断。

2.  **基础布局改造 (`Layout.vue`)**:
    *   首先完成整体布局的响应式改造，实现抽屉式导航。这是后续所有页面适配的基础。

3.  **逐个页面/组件改造**:
    *   按照从易到难的顺序进行改造：
        1.  `HomeView.vue` (简单，只需修改 `NGrid` 属性)
        2.  `SettingsView.vue` (中等，调整表单布局)
        3.  `SubscriptionsView.vue` (复杂，需要实现数据展示的响应式切换和操作按钮的收纳)
    *   在改造过程中，同步调整所有相关的模态框样式。

4.  **测试**:
    *   使用浏览器开发者工具的设备模拟功能，针对不同的屏幕尺寸（特别是 iPhone、iPad 等主流设备）进行充分测试。
    *   重点测试布局是否错乱、内容是否被截断、交互是否流畅。

5.  **代码审查与合并**:
    *   所有改动完成后，进行一次全面的代码审查，确保代码风格统一、响应式逻辑清晰，然后合并到主分支。

---

至此，技术方案规划完毕。这份方案为项目的移动端适配提供了清晰的路线图和具体的操作指南。


### 3.5. 其他页面适配策略

为了确保整个系统的全面适配，以下页面也需要进行相应的改造。

*   **`ProfilesView.vue` (配置管理)** & **`NodesView.vue` (节点管理)**
    *   **问题**: 与 `SubscriptionsView.vue` 类似，都存在数据表格横向溢出和顶部操作按钮密集的问题。
    *   **建议方案**:
        *   **数据展示**: 采用与 `SubscriptionsView.vue` 相同的策略，即在移动端将 `NDataTable` 转换为 `NList` 卡片列表，每张卡片展示核心信息，并通过“更多”按钮收纳次要操作。
        *   **操作按钮**: 同样将顶部的多个按钮收纳进一个“操作” `NDropdown` 菜单中。

*   **`ProfileEditView.vue` (配置编辑)**
    *   **问题**: 该页面内嵌了复杂的 `ProfileForm.vue` 组件，其中包含多个 `NCard` 和 `NFormItem`，在小屏幕上会显得拥挤。
    *   **建议方案**:
        *   **表单布局**: 审查 `ProfileForm.vue`，确保其中的 `NGrid` 或 `Flex` 布局在移动端能正确地从多列转为单列。
        *   **标签与输入框**: 确保 `NFormItem` 的标签（label）在移动端位于输入框的上方，而不是左侧，以节省水平空间。这可以通过 Naive UI 的 `label-placement="top"` 属性实现。
        *   **卡片间距**: 适当调整 `NCard` 之间的垂直间距，使其在移动端堆叠时不会显得过于紧凑。

*   **`UserManagementView.vue` (用户管理)**
    *   **问题**: 页面包含一个 `NDataTable`，虽然列数不多，但在小屏幕上仍可能出现拥挤。
    *   **建议方案**:
        *   **简化表格**: 在移动端，可以考虑隐藏“创建时间”、“更新时间”等次要信息列，只保留“用户名”、“角色”和“操作”列。
        *   **操作按钮**: “提升为管理员”和“删除”按钮的文字可能过长，在移动端可以考虑将其转换为图标按钮，并通过 `NTooltip` 提供文字提示，或者将它们收纳到“更多”操作菜单中。


## 5. 页面级详细适配方案 (修订版)

根据“一次成功”的要求，本章节将对每个关键页面和组件提供具体到实现细节的移动端适配方案。

### 5.1. `ProfileEditView.vue` & `ProfileForm.vue` (配置编辑页)

这是整个项目中最复杂的表单页面，需要进行精细化适配。

#### 5.1.1. 整体布局调整

*   **问题**: `ProfileForm.vue` 中 `n-grid :cols="5"` 的两栏布局在移动端会崩溃。左侧占2格，右侧占3格。
*   **方案**:
    1.  修改 `NGrid` 定义：将 `<n-grid :cols="5" :x-gap="24">` 修改为 `<n-grid cols="1" md:cols="5" :x-gap="24">`。
    2.  修改 `NGi` 定义：将左右两栏的 `<n-gi :span="2">` 和 `<n-gi :span="3">` 分别修改为 `<n-gi span="1" md:span="2">` 和 `<n-gi span="1" md:span="3">`。
    *   **效果**: 在移动端（小于 `md` 断点），左右两栏将自动垂直堆叠，每栏占据全部宽度。在桌面端，保持原有的 2:3 布局。

#### 5.1.2. 左栏适配 (`Core Definition` & `Output Target` 卡片)

*   **问题**: 两个卡片垂直排列，在移动端保持不变即可，但内部表单项需要调整。
*   **方案**:
    1.  **`NForm` 标签位置**: 为最外层的 `<n-form>` 添加 `label-placement="top"` 属性。这将使所有 `NFormItem` 的标签都显示在输入框的上方，而不是左侧，这是移动端表单的最佳实践。
    2.  **生成链接**: “生成链接”部分的 `NInput` 和 `NButton` 组合在小屏幕上可能会显得拥挤。可以考虑在移动端将复制按钮移到输入框下方，或者保持现状，因为 Naive UI 的 `NInputGroup` 具有一定的自适应能力。**初步决定保持现状，测试后调整。**

#### 5.1.3. 右栏适配 (`Data Source & Content Processing` 卡片)

这是最复杂的部分，包含了 `NTabs`。

*   **`NTabs` 适配**:
    *   **问题**: “机场订阅”、“手工节点”、“节点处理”三个 Tab 在移动端横向排列会超出屏幕。
    *   **方案**: Naive UI 的 `NTabs` 在空间不足时会自动提供滚动功能。这个默认行为是可接受的。我们**不需要**将其改为下拉菜单，以保持UI的一致性。

*   **“机场订阅” Tab 内部适配**:
    *   **问题**: 筛选输入框、订阅列表 `NCollapse`、以及底部的多个 `NFormItem` 布局混乱。
    *   **方案**:
        1.  **筛选框**: `<n-input ... placeholder="筛选订阅名称">` 保持不变，其宽度会自动适应。
        2.  **订阅列表**: `NCollapse` 和内部的 `NCheckboxGroup` 垂直布局，天然适合移动端，无需改动。
        3.  **底部策略区**:
            *   **问题**: 底部的 `<n-space align="center" justify="space-between">` 包含了多个 `NFormItem`，在移动端会严重挤压。
            *   **方案**: 将 `<n-space>` 的 `justify` 属性去掉，并添加 `vertical` 属性，使其在移动端垂直排列。可以使用 `useMediaQuery` hook 来动态设置该属性。
                ```vue
                // In <script setup>
                import { useMediaQuery } from '@vueuse/core';
                const isMobile = useMediaQuery('(max-width: 768px)');

                // In <template>
                <n-space :vertical="isMobile" ...>
                ```
            *   **效果**: 在移动端，“订阅选择策略”、“轮询模式”、“请求超时”等表单项将各自占据一行，垂直堆叠，清晰明了。

*   **“手工节点” Tab 内部适配**:
    *   **方案**: 此 Tab 的结构与“机场订阅”几乎完全相同，采用完全一致的适配方案即可（筛选框不变，`NCollapse` 不变）。

*   **“节点处理” Tab 内部适配**:
    *   **问题**: 包含多个 `NSwitch` 和 `NInput` 表单项，以及一个 `ProfileRulesManager` 组件。
    *   **方案**:
        1.  由于我们已经在顶层 `NForm` 设置了 `label-placement="top"`，这里的 `NFormItem` 会自动适配。
        2.  `ProfileRulesManager` 组件需要单独进行适配。

#### 5.1.4. `ProfileRulesManager.vue` 组件适配

*   **问题**:
    1.  `NDataTable` 包含 “名称”, “类型”, “值”, “排序”, “启用”, “操作” 6个列，在移动端会横向溢出。
    2.  弹出的 `NModal` 编辑框宽度固定为 `600px`。
*   **方案**:
    1.  **表格转卡片列表**:
        *   使用 `useMediaQuery` 判断是否为移动端。
        *   如果是移动端，则渲染一个 `NList` 而不是 `NDataTable`。
        *   每个 `NListItem` 作为一个卡片，显示**规则名称**和**类型**。右侧放置一个“编辑”按钮和一个“删除”按钮。**值**、**排序**、**启用**等信息可以在点击“编辑”后在模态框中查看。
    2.  **模态框适配**:
        *   将 `<n-modal ... style="width: 600px;">` 修改为 `<n-modal ... :style="{ width: isMobile ? '90vw' : '600px' }">`。
        *   模态框内部的 `NForm` 同样设置 `label-placement="top"`。
        *   规则提示 `NAlert` 中的内容会自动换行，无需特殊处理。

#### 5.1.5. 底部操作按钮

*   **问题**: “取消”和“保存配置”按钮。
*   **方案**: `n-space justify="end"` 布局在移动端表现良好，按钮会自动靠右，无需修改。

---


### 5.2. `SettingsView.vue` (设置页)

此页面包含 `GeneralSettings.vue` 和 `ConversionSettings.vue` 两个子组件，通过 `NTabs` 切换。

#### 5.2.1. `GeneralSettings.vue` (通用设置)

*   **Telegram 通知设置**:
    *   **问题**: 使用了 `<n-grid :cols="2" :x-gap="24">` 来并排显示“Bot Token”和“Chat ID”输入框。
    *   **方案**:
        1.  将 `NGrid` 修改为 `<n-grid cols="1" md:cols="2" :x-gap="24">`。
        2.  将两个 `NFormItemGi` 的 `span` 属性保持为 `1`（或不设置）。
    *   **效果**: 在移动端，两个输入框将自动垂直堆叠。

*   **订阅令牌设置**:
    *   **问题**: `NInputGroup` 包含了输入框和三个按钮（复制、保存、重置）。在小屏幕上，这些元素会挤在一起或换行混乱。
    *   **方案**:
        1.  将 `<n-space vertical>` 包裹的 `NInputGroup` 和 `NButton` 拆分。
        2.  在移动端，将“复制”和“保存”按钮移到输入框的下一行。可以使用 `Flexbox` 和 `flex-wrap` 来实现。
            ```html
            <div class="flex flex-wrap items-center gap-2">
              <n-input class="flex-grow" ... />
              <n-button @click="copyToken" ...>复制</n-button>
              <n-button @click="saveToken" ...>保存</n-button>
            </div>
            <n-button @click="resetToken" class="mt-2" ...>重置令牌</n-button>
            ```
        3.  使用 Tailwind CSS 的响应式前缀（如 `md:flex-nowrap`）来在桌面端恢复单行布局。

*   **修改密码**:
    *   **问题**: 同样使用了 `<n-grid :cols="2">`，但只有一个 `NFormItemGi`。
    *   **方案**: 将 `NGrid` 修改为 `<n-grid cols="1" md:cols="2">`。虽然只有一个元素，但这能保证布局的一致性，并且在未来扩展时不会出错。

#### 5.2.2. `ConversionSettings.vue` (订阅转换设置)

*   **问题**: 此组件内嵌了两次 `AssetManager.vue` 组件。我们需要分析 `AssetManager.vue` 的内部结构。
*   **方案**:
    1.  **阅读 `AssetManager.vue`**: 我需要先阅读 [`src/components/AssetManager.vue`](src/components/AssetManager.vue:1) 的代码来确定其适配方案。
    2.  **初步推测**: `AssetManager.vue` 很可能也包含一个 `NDataTable` 和一些操作按钮。其适配方案将类似于其他表格页面的方案：移动端将表格转换为卡片列表，并将操作按钮收纳。

在完成对 `AssetManager.vue` 的分析后，将在这里补充更详细的方案。

---


#### 5.2.3. `AssetManager.vue` 组件适配

`ConversionSettings.vue` 页面依赖此组件来管理“后端”和“配置”。

*   **问题**:
    1.  `NDataTable` 包含“默认”、“名称”、“URL”、“操作”四列，在移动端会超出宽度。
    2.  弹出的 `NModal` 编辑框宽度固定为 `600px`。

*   **方案**:
    1.  **表格转卡片列表**:
        *   使用 `useMediaQuery` 判断是否为移动端。
        *   如果是移动端，渲染 `NList`。每个 `NListItem` 显示**资源名称**和**URL**（URL可以只显示部分，并允许点击复制）。
        *   **“设为默认”按钮**: 将星形图标按钮放在卡片的左上角或右上角，保持其功能。
        *   **“编辑”和“删除”按钮**: 这两个按钮放在卡片的底部。
    2.  **模态框适配**:
        *   将 `<n-modal ... style="width: 600px;">` 修改为 `<n-modal ... :style="{ width: isMobile ? '90vw' : '600px' }">`。
        *   模态框内部的 `NForm` 同样设置 `label-placement="top"`。

### 5.3. `SubscriptionsView.vue` (订阅管理页)

这是另一个核心复杂页面，现在我们对其进行超详细设计。

*   **问题**: 顶部操作按钮过多；`NTabs` 分组过多时不易操作；`NDataTable` 列数太多（8列），横向滚动体验差。
*   **方案**:
    1.  **顶部操作区**:
        *   使用 `useMediaQuery` 判断是否为移动端。
        *   在移动端，只保留“新增订阅”按钮，其他所有按钮（“更新全部”、“批量导入”、“新增分组”等）全部收纳到一个“更多操作”的 `NDropdown` 按钮中。
    2.  **Tabs 导航**:
        *   保持 Naive UI 的默认滚动行为。这个体验在移动端是可接受的。
    3.  **数据表格 `NDataTable`**:
        *   **彻底替换为卡片列表**: 在移动端，完全不渲染 `NDataTable`，改为渲染 `NList`。
        *   **卡片设计 (`NListItem`)**:
            *   **顶部**: 左侧显示**订阅名称** (`NTag` 形式)，右侧显示**状态**（成功/失败/待更新，用不同颜色的 `NTag`）。
            *   **中部**: 分两行或两列显示“节点数”、“剩余流量”、“剩余天数”。对于流量和天数，使用不同颜色（如临近到期用红色）的 `NTag` 来高亮显示。
            *   **底部**: 放置一排图标按钮，对应“预览节点”、“规则”、“编辑”、“更新”、“删除”等操作。使用 `NTooltip` 在用户长按时显示按钮功能。
        *   **Mermaid 卡片结构示意**:
            ```mermaid
            graph TD
                subgraph "移动端订阅卡片"
                    A["<b>订阅名称</b> (NTag)"]
                    B["<b>状态</b> (NTag: success/error)"]
                    C["节点数: 100"]
                    D["流量: 100GB (NTag: warning)"]
                    E["天数: 5天 (NTag: error)"]
                    F["[预览] [规则] [编辑] [更新] [删除] (图标按钮)"]
                    
                    A -- "同一行" --> B
                    B -- "换行" --> C
                    C -- "同一行" --> D
                    D -- "同一行" --> E
                    E -- "换行" --> F
                end
            ```
    4.  **所有关联的模态框**:
        *   `新增/编辑订阅`: 宽度改为响应式 `90vw`。
        *   `批量导入`: 宽度改为响应式 `90vw`。
        *   `节点预览`: 宽度改为响应式 `95vw`，内部的 `NDataTable` 同样需要适配，可以减少列数或允许横向滚动。
        *   `规则管理`: 宽度改为响应式 `95vw`，内部表格按 `ProfileRulesManager` 的方案适配。
        *   所有其他确认对话框 (`useDialog`) 都是自适应的，无需修改。

---


### 5.4. `NodesView.vue` (节点管理页) & `ProfilesView.vue` (配置管理页)

这两个页面的结构和功能非常相似，可以采用统一的适配方案。

*   **问题**: 顶部操作按钮密集；`NDataTable` 列数过多。
*   **方案**:
    1.  **顶部操作区**:
        *   与 `SubscriptionsView.vue` 类似，在移动端使用 `NDropdown` 收纳大部分操作按钮，仅保留1-2个常用按钮（如“导入节点”或“新增配置”）。
    2.  **数据表格 `NDataTable`**:
        *   **`NodesView.vue`**:
            *   **移动端显示列**: 只保留“状态”、“名称”、“延迟”和“操作”四列。其中“名称”列应给予更多空间。
            *   **操作列**: 将“编辑”和“删除”按钮合并到一个“更多” `NDropdown` 菜单中，以节省空间。“测试”按钮（闪电图标）可以保留为独立图标按钮。
        *   **`ProfilesView.vue`**:
            *   **移动端显示列**: 只保留“名称”和“操作”两列。“订阅链接”列在移动端没有直接点击的意义，可以放在详情或编辑页中。
            *   **操作列**: 将所有操作（复制、预览、日志、编辑、删除）全部转换为图标按钮，并收纳到一个“更多” `NDropdown` 菜单中，只在菜单中显示文字。
    3.  **关联模态框**:
        *   所有弹出的模态框（如节点预览、批量导入、日志查看等）的宽度均设置为响应式，桌面端为固定宽度（如 `1200px` 或 `800px`），移动端统一为 `95vw`。
        *   模态框内部若有表格或复杂内容，同样需要遵循上述原则进行二次适配。

### 5.5. `UserManagementView.vue` (用户管理页)

*   **问题**:
    1.  `NCard` 中的“允许新用户注册”开关布局。
    2.  `NDataTable` 在小屏幕上可能会拥挤。
*   **方案**:
    1.  **系统设置卡片**:
        *   `<n-flex align="center">` 布局在移动端表现良好，会自动处理对齐，无需修改。
    2.  **数据表格 `NDataTable`**:
        *   **移动端显示列**: 隐藏“ID”、“创建时间”、“更新时间”列，只保留“用户名”、“角色”和“操作”三列。
        *   **操作列**: 将“降为普通用户”/“提升为管理员”和“删除”两个按钮的文字在移动端简化。
            *   **方案A**: 直接使用 `useMediaQuery` 动态改变按钮文字，例如 "提升" / "降级"。
            *   **方案B (更优)**: 将两个按钮收纳到一个“操作” `NDropdown` 菜单中，以应对未来可能增加的更多操作。

### 5.6. `HomeView.vue` (仪表盘) & `Layout.vue` (主布局)

这两个在之前的方案中已经有了比较详细的描述，这里再次确认并最终定稿。

*   **`Layout.vue`**:
    *   **方案**: 确定采用**抽屉式导航**方案。使用 `useMediaQuery` 判断，在移动端隐藏 `NLayoutSider`，并在 `NLayoutHeader` 左侧添加汉堡按钮，点击后弹出 `NDrawer` 显示 `NMenu`。这是最成熟的移动端后台导航方案。
*   **`HomeView.vue`**:
    *   **方案**: 确定将 `<n-grid cols="2 s:3 m:4">` 修改为 `<n-grid cols="1" s:2 m:4">`。这是最简单且最有效的适配方式，确保移动端单列布局。

---

至此，所有页面的超详细适配方案均已设计完毕。
