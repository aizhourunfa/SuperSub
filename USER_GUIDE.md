# SuperSub 用户指南

欢迎使用 SuperSub！本指南将帮助您快速上手平台的核心功能。

## 目录
1.  [节点管理 (Nodes View)](#1-节点管理-nodes-view)
2.  [订阅管理 (Subscriptions View)](#2-订阅管理-subscriptions-view)
3.  [配置集 (Profiles)](#3-配置集-profiles)
4.  [设置 (Settings)](#4-设置-settings)

---

## 1. 节点管理 (Nodes View)

节点管理是 SuperSub 的基础。您可以在“节点”页面手动添加、编辑和管理您的代理节点。

### 1.1 导入节点

我们推荐使用批量导入功能来快速添加节点。

1.  点击页面右上角的 **“导入节点”** 按钮。
2.  在弹出的窗口中，您可以粘贴一个或多个节点分享链接（如 `vmess://`, `ss://` 等）。系统会自动解析并实时显示节点预览。
    *   `[截图: 批量导入窗口，包含链接输入框和节点预览]`
3.  在导入前，您可以从 **“导入到分组”** 下拉菜单中选择一个已有的分组，将这些新节点直接归入该分组。如果留空，节点将进入“未分组”列表。
4.  点击 **“导入”** 按钮完成操作。

### 1.2 节点分组 (Node Groups)

节点分组是管理大量节点的利器，让您的节点库井井有条。

#### 创建分组

1.  在“节点”页面，点击右上角的 **“新增分组”** 按钮。
2.  在弹出的窗口中输入分组名称，点击“保存”。

#### 管理与操作分组

分组的管理通过页面上方的 **标签页 (Tabs)** 完成。

*   **切换分组**: 单击分组标签，下方列表会只显示该分组下的节点。系统默认提供“全部”和“未分组”两个固定视图。
*   **排序分组**: 在标签页区域，**按住并拖动** 分组标签，即可自由调整它们的显示顺序。
    *   `[动图/截图: 演示拖拽分组标签进行排序]`
*   **高级操作 (菜单)**: **右键点击** 分组标签，或 **单击标签右侧的“更多”图标** (⋮)，会弹出操作菜单。
    *   `[截图: 右键点击分组标签，显示操作菜单]`
    *   **重命名**: 修改分组的名称。
    *   **禁用/启用**: 禁用的分组标签会变灰。这是一个视觉标记，可以帮您区分常用和备用分组。此功能未来可能会与流水线等模块深度集成。
    *   **删除**: 删除分组。请放心，分组下的节点**不会**被删除，它们会自动变为“未分组”状态，您不会丢失任何节点数据。

### 1.3 节点操作

#### 针对单个节点

在节点列表中，每一行都提供了快捷操作：

*   **编辑**: 修改节点的名称、原始链接等信息。
*   **删除**: 删除单个节点。

#### 针对多个节点 (批量操作)

1.  在节点列表中，勾选一个或多个节点。
2.  页面右上角会出现批量操作按钮：
    *   **移动到分组**: 将所有选中的节点一次性移动到另一个分组，或将它们移出当前分组（通过在下拉菜单中清空选择）。
    *   **批量删除**: 一次性删除所有选中的节点。操作不可逆，请谨慎使用。

#### 针对整个分组 (一键操作)

在“节点”页面，您可以对 **当前显示的整个分组** 执行一键操作：

*   **一键排序**: 根据节点的延迟、名称等预设规则对当前分组下的所有节点进行快速排序。
*   **一键去重**: 移除当前分组下的重复节点（基于节点的服务器、端口和协议等关键信息判断）。
*   **一键清空**: 删除当前分组下的 **所有** 节点。这是一个危险操作，请务必确认。

#### 手动拖拽排序

如果您需要自定义节点的顺序：

1.  点击 **“手动排序”** 按钮，节点列表会进入排序模式。
2.  此时，您可以按住每个节点前的 **拖动图标** (⠿)，上下拖拽以调整其在列表中的位置。
3.  调整完毕后，列表上方会出现提示。点击 **“保存排序”** 按钮来持久化您的修改。如果不想保存，点击“取消”即可。
    *   `[动图/截图: 演示拖拽节点进行排序并保存]`

---

## 2. 订阅管理 (Subscriptions View)

订阅管理用于从外部来源（如机场）聚合节点。这是自动化获取和更新节点的主要方式。

### 2.1 订阅列表详解

订阅列表是您管理所有订阅的核心区域。除了基本信息外，我们还增加了一些强大的功能来帮助您更好地掌握订阅状态。

*   `[截图: 订阅管理页面全览，高亮显示新添加的列和图标化操作按钮]`

#### a. 剩余流量与到期时间

列表新增了 **“剩余流量”** 和 **“剩余天数”** 两列，让您对机场套餐情况一目了然。

*   **自动检测**: 当您点击 **“更新”** 或 **“更新全部”** 时，SuperSub 会自动尝试从订阅信息中解析流量和到期时间。
*   **颜色预警**:
    *   当剩余天数少于7天或剩余流量低于30%时，标签会变为 **黄色** ⚠️。
    *   当剩余天数少于3天或剩余流量低于10%时，标签会变为 **红色** ⛔️。
    *   如果显示为 "N/A"，表示系统未能从该订阅中获取到相关信息。
*   **详细信息**: 将鼠标悬停在“剩余流量”或“剩余天数”的标签上，会弹出提示框，显示更详细的数据，如总流量、已用流量和确切的到期日期。
    *   `[截图: 鼠标悬停在“剩余流量”列，显示详细的流量信息Tooltip]`

#### b. 操作按钮

为了界面更简洁，操作按钮已全部图标化。将鼠标悬停在图标上会显示其功能。

*   👁️ **预览节点**: 查看该订阅经过规则处理后的最终节点列表。
*   🎚️ **规则**: 管理该订阅的专属过滤和重命名规则。
*   ✏️ **编辑**: 修改订阅的名称或链接。
*   🔄 **更新**: 立刻从远程服务器获取该订阅的最新信息。
*   🗑️ **删除**: 删除该订阅。

### 2.2 添加与管理订阅

*   **新增订阅**: 点击页面右上角的 **“新增订阅”** 按钮，输入名称和订阅链接即可。
*   **批量导入**: 点击 **“批量导入”**，可以一次性添加多个订阅。格式为 `订阅名称,订阅链接`，每行一个。如果只提供链接，系统会尝试从链接中自动生成一个名称。
*   **批量删除**: 在列表最左侧勾选一个或多个订阅，然后点击页面右上角的 **“批量删除”** 按钮，即可一次性删除所有选中的订阅。
*   **更新订阅**:
    *   **单个更新**: 点击列表中每行右侧的 **更新图标** (🔄)，可立即从远程地址获取最新的节点列表。
    *   **全部更新**: 点击页面右上角的 **“更新全部”**，会触发一个后台任务，依次更新所有订阅。
*   **链接预览**: 如果您不确定一个链接是否有效，可以点击 **“链接预览”**。系统会尝试解析该链接，并展示其中的节点数量、协议和地区分布等信息，而不会真的创建订阅。

### 2.2 订阅规则 (Subscription Rules)

订阅规则是 SuperSub 的强大功能之一，它允许您在 **更新订阅时** 自动对获取到的节点进行处理。每个订阅都可以拥有自己的一套规则。

1.  在订阅列表中，点击目标订阅右侧的 **“规则”** 按钮，进入规则管理弹窗。
2.  在此窗口中，您可以为该订阅添加多种规则：
    *   **按名称关键词过滤/排除**: 这是最常用的规则。您可以设置一系列关键词（如 `香港`, `BGP`, `专线`），然后选择是 **只保留** 名称包含这些词的节点，还是 **排除** 它们。
    *   **按名称正则过滤**: 使用正则表达式进行更灵活的节点名称匹配和过滤。
    *   **按正则重命名**: 对节点进行批量重命名。例如，您可以将 `[HK] Node 01` 格式的节点名，通过正则表达式 `^\[(.*)\]\s.*(\d+)$` 和重命名格式 `New-$1-$2`，批量重命名为 `New-HK-01`。

    *   `[截图: 订阅规则编辑窗口，展示不同规则类型的配置]`

**重要提示**: 规则是在每次 **更新订阅** 时执行的。修改规则后，您需要手动点击“更新”按钮，新的规则才会生效，并影响该订阅下的节点。

### 2.3 预览节点

点击订阅列表中的 **“预览节点”** 按钮，可以查看该订阅在 **经过所有规则处理后** 的最终节点列表。这对于调试和验证您的规则是否按预期工作非常有用。

---

## 3. 配置集 (Profiles)

“配置集”是 SuperSub 的核心，它是您所有努力的最终成果。一个配置集定义了一个“配方”，告诉系统如何将您的各种节点源组合起来，并生成一个可供客户端使用的最终订阅链接。

### 3.1 创建与编辑配置集

1.  导航到 **“配置管理”** 页面。
2.  点击 **“新增配置”** 按钮，打开配置编辑窗口。
    *   `[截图: 配置集编辑窗口全览]`

#### a. 基本信息

*   **名称/描述**: 为您的配置集设置一个易于识别的名称和描述。
*   **链接别名 (Alias)**: 这是非常重要的一步。为您配置集设置一个简短、唯一的英文别名（如 `my-clash`）。最终生成的订阅链接将是 `https://<你的域名>/sub/<别名>`。如果留空，系统会生成一个基于ID的链接，不易于记忆和使用。

#### b. 数据源 (Data Sources)

在这里，您可以选择要包含在此配置集中的所有节点来源。

*   **机场订阅**: 从您已创建的订阅列表中，勾选一个或多个。这里是新功能的所在地。
*   **手工节点**: 从您手动创建的节点列表中，勾选一个或多个。

您可以混合使用这两种来源。最终生成的配置将包含所有选定来源的节点。

##### 机场订阅高级功能：轮询与随机

在“机场订阅”标签页的底部，您会看到“轮询”和“随机”两个开关。这是为拥有多个机场订阅的用户设计的高级功能。

*   `[截图: 机场订阅标签页，高亮显示底部的“轮询”和“随机”开关]`

*   **轮询 (Polling)**:
   *   **作用**: 当您选择了多个机场订阅并开启此开关后，每次您的客户端请求订阅链接时，SuperSub 会从您选择的订阅列表中**按顺序**返回一个。例如，第一次更新返回A订阅的节点，第二次更新返回B订阅的节点，第三次返回C订阅，然后回到A，如此循环。
   *   **使用场景**: 适用于希望在多个备用机场之间实现自动切换和负载均衡的场景，避免单个机场故障导致所有节点失效。

*   **随机 (Random)**:
   *   **作用**: 开启此开关后，每次客户端请求订阅链接时，SuperSub 会从您选择的订阅列表中**随机**挑选一个返回。
   *   **使用场景**: 适用于不希望暴露固定订阅源，或希望每次更新都能有“新鲜感”的场景。

**重要提示**: “轮询”和“随机”功能是**互斥**的，您只能选择其中一种模式。当您打开一个时，另一个会自动关闭。如果两个都关闭，系统将合并所有选定订阅的节点，这是默认行为。

#### c. 节点前缀处理

在“配置集”编辑窗口中，有一个专门的“节点处理”标签页，您可以在这里为节点名称添加统一的前缀，方便在客户端中识别和分组。

*   `[截图: 节点处理标签页，高亮显示三个前缀设置项]`

系统提供了三种前缀设置，它们的逻辑如下：

1.  **机场订阅节点前缀**:
    *   **作用**: 开启此开关后，所有来自“机场订阅”的节点，其名称都会自动变为 `订阅名称 - 节点名称` 的格式。
    *   **示例**: 如果您有一个名为“My-Airport”的订阅，其中的一个节点叫“HK-Node-01”，开启此功能后，它在最终配置中会显示为 `My-Airport - HK-Node-01`。

2.  **使用分组名作为手工节点前缀**:
    *   **作用**: 这是针对“手工节点”的设置。开启此开关后，所有被选中的手工节点，都会使用其所属的“分组名称”作为前缀。
    *   **示例**: 如果您有一个名为“My-Manual-Nodes”的分组，其中的一个节点叫“JP-Node-02”，开启此功能后，它会显示为 `My-Manual-Nodes - JP-Node-02`。
    *   **优先级**: 这是手工节点前缀的 **最高** 优先级。

3.  **手工节点自定义前缀**:
    *   **作用**: 如果您关闭了“使用分组名作为前缀”的开关，此输入框会变为可用。您可以在这里输入一个统一的文本，作为所有手工节点的前缀。
    *   **互斥逻辑**: 为了避免混淆，当“使用分组名作为前缀”开启时，此项会自动禁用并清空。您只能在两种手工节点前缀模式中选择一种。
    *   **示例**: 如果您在此处输入“MyPrefix”，那么所有手工节点的名称都会变为 `MyPrefix - 节点名称`。

如果所有前缀开关都关闭，且自定义前缀也为空，那么所有节点都将保持其原始名称。

#### d. 生成设置 (在线转换)

此部分定义了如何将您选择的节点转换为客户端可以识别的格式。

*   **转换后端 (Backend)**: 选择一个 `subconverter` 服务地址。通常您不需要更改此项，除非您想使用自定义的转换服务。
*   **转换配置 (Config)**: 这是最关键的设置。它是一个预定义的模板，决定了最终输出的配置文件内容，例如 Clash 的代理组 (Proxy Groups)、分流规则 (Rules) 等。您可以根据自己的需求选择不同的配置，如“默认”、“去广告”、“流媒体优化”等。

### 3.2 预览与获取链接

*   **预览**: 在配置集列表中，点击“预览”图标 (眼睛形状)，可以查看该配置集最终会生成哪些节点，并看到节点总数、协议和地区分布等统计信息。这在发布前非常有用，可以帮您确认数据源和规则是否都按预期工作。
*   **获取链接**: 点击“复制”图标，即可将生成的订阅链接复制到剪贴板，然后您可以将其添加到您的代理客户端中。

---

## 4. 设置 (Settings)

设置页面允许您对系统的全局行为进行配置。

### 4.1 通用设置

*   **Telegram 通知**:
    *   您可以配置一个 Telegram Bot，让 SuperSub 在执行某些操作（未来规划）后向您发送通知。
    *   **Bot Token**: 您的 Telegram Bot 的 Token。
    *   **Chat ID**: 您希望接收通知的个人、频道或群组的 ID。
    *   配置完成后，可以点击 **“发送测试通知”** 来验证设置是否正确。

### 4.2 订阅转换设置

此页面用于管理“在线转换”所依赖的全局资源。在这里进行的设置，将作为所有“配置集”的默认选项。

*   **订阅转换后端管理**:
    *   “后端”指的是 `subconverter` 服务的 URL。
    *   系统内置了一些公共服务，您也可以添加自己的私有服务。
    *   您可以将任何一个后端设置为 **“默认”**。在“配置集”中未指定后端时，将使用此默认后端。

*   **订阅转换配置管理**:
    *   “配置”指的是 `subconverter` 在转换时所依据的配置文件（通常是一个 `.ini` 文件）的 URL。这个文件定义了 Clash 代理组、分流规则等高级行为。
    *   系统内置了许多常用的在线配置，您也可以添加自己的配置。
    *   同样，您可以将任何一个配置设置为 **“默认”**。